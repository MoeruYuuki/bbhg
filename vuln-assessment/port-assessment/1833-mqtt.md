# 1833 - MQTT

## Potential Risks

### Unauthenticated Access

```bash
# https://github.com/evilsocket/legba
legba mqtt --target localhost:1883 \
    --username anonymous \
    --password loremIpsumDolorSitAmet

# Bulk testing
legba mqtt --target @hosts.txt \
    --username anonymous \
    --password loremIpsumDolorSitAmet \
    --output-format jsonl --output mqtt_unauth.json &&
    jq -r '.target' mqtt_unauth.json | anew mqtt_unauth.txt &&
    rm mqtt_unauth.json &&
```

```bash
# Filter authenticated hosts
grep -vf mqtt_unauth.txt hosts.txt > mqtt_auth.txt
```

### Brute Force

```bash
# https://github.com/evilsocket/legba
legba mqtt --target localhost:1883 \
    --username usernames.txt \
    --password password.txt \
    --output-format jsonl --output mqtt_brute.json

# Bulk testing
legba mqtt --target @hosts.txt \
    --username usernames.txt \
    --password passwords.txt \
    --output-format jsonl --output mqtt_brute.json
```

## Exploiting

### Information Disclosure

```bash
# MQTT Explorer
https://github.com/thomasnordquist/MQTT-Explorer
```

<figure><img src="../../.gitbook/assets/20240531_215806.png" alt=""><figcaption></figcaption></figure>
